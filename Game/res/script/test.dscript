
set const c = 8;
set const c2 = 72;
set const r = 50;

set dir = 0;
set inv = false;

set enemy = enemy(_cx, 140, 1000);

while(!enemy.isDeleted()){
    for(d in 0, 360/c, 360){
        laser(dir + d);
    }
    
    dir += 15;
    inv = !inv;
    
    for(i in 90){
        wait;
        
        if(enemy.isDeleted()){
            break;
        }
    }
}

for(d in 0, 360/c2, 360){
    bullet(_orb, _orange, _cx, 140, d, 0, 0, 10, 0.05, 10);
}

task laser(dir){
    set type = _laser_helix;
    set color = _red;
    set angvel = 0.05;
    
    if(inv){
        type = _laser_dist;
        color = _blue;
        angvel *= -1;
    }
    
    set l = laser(type, color, {_cx + r*cos(dir), 140 + r*sin(dir)}, dir, 400, 64, 30);
    l.setAdditive();
    
    set c = 0;
    
    while(!l.isDeleted()){
        
        l.setPos({_cx + r*cos(dir), 140 + r*sin(dir)});
        l.setDir(dir);
        
        dir += angvel;
        c++;
        
        if(c > 120 || enemy.isDeleted()){
            l.delete();
        }
        
        wait;
    }
}